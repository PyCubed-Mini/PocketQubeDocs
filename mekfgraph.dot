digraph {
    "MEKF" [shape=rect]
    "sun_vector" [shape=rect, style=dashed]
    "IGRF" [shape=rect]
    "orbit_propogation" [shape=rect, style=dashed]
    "NED->ECEF" [shape=rect]
    "ECEF->ECI" [shape=rect]
    "ECI->ECEF" [shape=rect]
    "ECEF->GEOC" [shape=rect]
    
    "time" [shape=diamond]
    "Gyro" [shape=diamond]
    "Magnetometer" [shape=diamond]
    "Sun Sensors" [shape=diamond]

    "ω'=ω-β" [color=green]
    "β" [color=green]
    "δt"
    "ω"
    "br_mag"
    "br_sun"
    "nr_mag"
    "nr_sun"
    "t"
    "ned r_mag"
    "nr"

    "UplinkedData" [shape=pentagon, color=red, style=dotted]

    "Gyro"->"ω" 
    "ω"->"ω'=ω-β"
    "MEKF"->"β"
    "β"->"ω'=ω-β"
    "ω'=ω-β"->"MEKF"
    "time"->"δt"
    "Magnetometer"->"br_mag" [style=dotted]
    "time"->"t"
    "Sun Sensors"->"br_sun" [style=dotted]
    "sun_vector"->"nr_sun"
    "t"->"sun_vector"
    "IGRF"->"ned r_mag"
    "ned r_mag"->"NED->ECEF"
    "NED->ECEF"->"ECEF->ECI"
    "t"->"ECEF->ECI"
    "t"->"ECI->ECEF"
    "ECEF->ECI"->"nr_mag"

    "t"->"orbit_propogation"
    "orbit_propogation"->"nr"
    "nr"->"ECI->ECEF"
    "ECI->ECEF"->"ECEF->GEOC"
    "ECEF->GEOC"->"IGRF"
    "UplinkedData"->"orbit_propogation" [style=dotted]
    "UplinkedData"->"time" [style=dotted]

    "br_mag"->"MEKF" [style=dotted]
    "δt"->"MEKF" [style=dotted]
    "br_sun"->"MEKF" [style=dotted]
    "nr_mag"->"MEKF" [style=dotted]
    "nr_sun"->"MEKF" [style=dotted]
}